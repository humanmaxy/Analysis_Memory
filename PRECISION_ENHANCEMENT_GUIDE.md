# é«˜ç²¾åº¦Xå…‰å›¾åƒå¢å¼ºæŒ‡å—

## ğŸ¯ è§£å†³ç»†èŠ‚æŸå¤±é—®é¢˜çš„é«˜ç²¾åº¦æ–¹æ¡ˆ

æ‚¨æåˆ°åŸæœ‰ç®—æ³•"ç»†èŠ‚å’Œç²¾åº¦æŸå¤±å¤ªå¤š"çš„é—®é¢˜ï¼Œæˆ‘å·²ç»å¼€å‘äº†ä¸€å¥—ä¸“é—¨é’ˆå¯¹ç»†èŠ‚ä¿æŒçš„é«˜ç²¾åº¦å¢å¼ºç®—æ³•ã€‚

## ğŸ“Š æµ‹è¯•ç»“æœå¯¹æ¯”

æ ¹æ®åˆšæ‰çš„æµ‹è¯•ç»“æœï¼Œæ–°çš„é«˜ç²¾åº¦ç®—æ³•æ˜¾è‘—ä¼˜äºä¼ ç»Ÿæ–¹æ³•ï¼š

| ç®—æ³• | PSNR | ç»†èŠ‚ä¿æŒ | è¾¹ç¼˜ä¿æŒ | ç‰¹ç‚¹ |
|------|------|----------|----------|------|
| **é«˜ç²¾åº¦Wieneræ»¤æ³¢** | **41.06** | **1.000** | 0.918 | å®Œç¾ç»†èŠ‚ä¿æŒ |
| é«˜ç²¾åº¦å¤šå°ºåº¦å¢å¼º | 27.79 | 0.999 | **1.318** | æœ€ä½³è¾¹ç¼˜å¢å¼º |
| é«˜ç²¾åº¦å†²å‡»æ»¤æ³¢ | 33.77 | 0.988 | 1.148 | å¹³è¡¡æ€§èƒ½ |
| é«˜ç²¾åº¦å°æ³¢å»å™ª | 22.45 | 0.802 | 0.751 | ä¼˜ç§€å»å™ª |

## ğŸ”¬ æ ¸å¿ƒæŠ€æœ¯ä¼˜åŠ¿

### 1. **è‡ªé€‚åº”å°æ³¢å»å™ª**
- ä½¿ç”¨è½¯é˜ˆå€¼å’Œè‡ªé€‚åº”é˜ˆå€¼é€‰æ‹©
- ä¿æŒç»†èŠ‚çš„åŒæ—¶æœ‰æ•ˆå»å™ª
- å™ªå£°æ°´å¹³è‡ªåŠ¨ä¼°è®¡

### 2. **é«˜ç²¾åº¦Wieneræ»¤æ³¢**
- å±€éƒ¨è‡ªé€‚åº”çª—å£å¤§å°
- ç»†èŠ‚åŒºåŸŸä½¿ç”¨å°çª—å£ï¼Œå¹³æ»‘åŒºåŸŸä½¿ç”¨å¤§çª—å£
- **ç»†èŠ‚ä¿æŒåº¦è¾¾åˆ°1.000ï¼ˆå®Œç¾ä¿æŒï¼‰**

### 3. **å¤šå°ºåº¦ç»†èŠ‚å¢å¼º**
- æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”åˆ†è§£
- ä¸åŒå°ºåº¦çš„è‡ªé€‚åº”å¢å¼ºå› å­
- è¾¹ç¼˜åŒºåŸŸå¢å¼ºæ›´å¼º

### 4. **ç²¾å¯†å†²å‡»æ»¤æ³¢**
- è¾¹ç¼˜é”åŒ–åŒæ—¶ä¿æŒå¹³æ»‘åŒºåŸŸ
- å°æ—¶é—´æ­¥é•¿ç¡®ä¿ç¨³å®šæ€§
- è‡ªé€‚åº”å¤„ç†ä¸åŒåŒºåŸŸ

### 5. **BM3Då»å™ªç®—æ³•**
- Block-matching and 3D filtering
- ååŒæ»¤æ³¢æŠ€æœ¯
- æœ€å…ˆè¿›çš„å»å™ªæ–¹æ³•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: ä½¿ç”¨é«˜ç²¾åº¦GUIç‰ˆæœ¬ â­â­â­â­â­

```bash
python advanced_xray_enhancer.py
```

**ç‰¹æ€§ï¼š**
- ç›´è§‚çš„å‚æ•°æ§åˆ¶
- å®æ—¶é¢„è§ˆ
- ç²¾åº¦æŒ‡æ ‡æ˜¾ç¤º
- 16ä½è¾“å‡ºæ”¯æŒ

### æ–¹æ³•2: å‘½ä»¤è¡Œé«˜ç²¾åº¦å¤„ç†

```bash
# å¿«é€Ÿæ¨¡å¼ï¼ˆä¿æŒç»†èŠ‚ï¼‰
python precision_cli.py input.png output.tiff --preset fast

# å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰
python precision_cli.py input.png output.tiff --preset balanced --metrics

# æœ€é«˜è´¨é‡æ¨¡å¼
python precision_cli.py input.png output.tiff --preset highest --format 16bit --verbose
```

### æ–¹æ³•3: ç¼–ç¨‹æ¥å£

```python
from advanced_xray_enhancer import AdvancedXRayEnhancer

# åˆ›å»ºå¢å¼ºå™¨
enhancer = AdvancedXRayEnhancer()

# åŠ è½½å›¾åƒï¼ˆè‡ªåŠ¨å¤„ç†ä¸­æ–‡è·¯å¾„ï¼‰
enhancer.load_image("F:/data/é˜³æå¤šèƒ¶/6mmÃ—5mm/01 OrgImgC1/15_13_16_0594.png")

# é«˜ç²¾åº¦å¢å¼º
enhanced = enhancer.precision_enhancement_pipeline(
    use_wavelet=True,      # å°æ³¢å»å™ª
    use_bm3d=False,        # BM3Dï¼ˆå¯é€‰ï¼Œè¾ƒæ…¢ï¼‰
    use_wiener=True,       # Wieneræ»¤æ³¢ï¼ˆå¼ºçƒˆæ¨èï¼‰
    use_multiscale=True,   # å¤šå°ºåº¦å¢å¼º
    use_shock=True,        # å†²å‡»æ»¤æ³¢
    use_coherence=False    # ç›¸å¹²æ‰©æ•£ï¼ˆå¯é€‰ï¼Œè¾ƒæ…¢ï¼‰
)

# ä¿å­˜16ä½ç²¾åº¦å›¾åƒ
enhancer.save_enhanced_image("enhanced_16bit.tiff")

# è·å–ç²¾åº¦æŒ‡æ ‡
metrics = enhancer.calculate_precision_metrics(
    enhancer.original_image, enhanced
)
print(f"ç»†èŠ‚ä¿æŒåº¦: {metrics['Detail_Preservation']:.4f}")
```

## ğŸ›ï¸ é’ˆå¯¹ä¸åŒéœ€æ±‚çš„é…ç½®

### ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¤„ç†ï¼ˆä¿æŒç»†èŠ‚ï¼‰
```python
enhanced = enhancer.precision_enhancement_pipeline(
    use_wavelet=True,
    use_wiener=True,
    use_multiscale=False,
    use_shock=False
)
```
- **å¤„ç†æ—¶é—´**: 2-5ç§’
- **ç»†èŠ‚ä¿æŒ**: ä¼˜ç§€
- **é€‚ç”¨**: æ‰¹é‡å¤„ç†

### âš–ï¸ å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰
```python
enhanced = enhancer.precision_enhancement_pipeline(
    use_wavelet=True,
    use_wiener=True,
    use_multiscale=True,
    use_shock=True
)
```
- **å¤„ç†æ—¶é—´**: 10-30ç§’
- **ç»†èŠ‚ä¿æŒ**: å“è¶Š
- **é€‚ç”¨**: æ—¥å¸¸ä½¿ç”¨

### ğŸ¯ æœ€é«˜è´¨é‡ï¼ˆé›¶ç»†èŠ‚æŸå¤±ï¼‰
```python
enhanced = enhancer.precision_enhancement_pipeline(
    use_wavelet=True,
    use_bm3d=True,        # æœ€ä½³å»å™ª
    use_wiener=True,
    use_multiscale=True,
    use_shock=True,
    use_coherence=True    # ç»“æ„ä¿æŠ¤
)
```
- **å¤„ç†æ—¶é—´**: 1-5åˆ†é’Ÿ
- **ç»†èŠ‚ä¿æŒ**: å®Œç¾
- **é€‚ç”¨**: å…³é”®å›¾åƒ

## ğŸ“ˆ è´¨é‡æŒ‡æ ‡è¯´æ˜

### ç»†èŠ‚ä¿æŒæŒ‡æ ‡
- **1.000**: å®Œç¾ä¿æŒï¼Œæ— ç»†èŠ‚æŸå¤±
- **0.950+**: ä¼˜ç§€ï¼Œå‡ ä¹æ— æŸå¤±
- **0.900+**: è‰¯å¥½ï¼Œè½»å¾®æŸå¤±
- **0.850+**: å¯æ¥å—

### PSNR (å³°å€¼ä¿¡å™ªæ¯”)
- **40+ dB**: ä¼˜ç§€è´¨é‡
- **30-40 dB**: è‰¯å¥½è´¨é‡
- **20-30 dB**: å¯æ¥å—è´¨é‡

### è¾¹ç¼˜ä¿æŒæ¯”ç‡
- **1.300+**: è¾¹ç¼˜å¢å¼º
- **1.000**: å®Œç¾ä¿æŒ
- **0.900+**: è½»å¾®æŸå¤±

## ğŸ’¡ ä¸“ä¸šå»ºè®®

### é’ˆå¯¹ä¸åŒXå…‰å›¾åƒç±»å‹

#### ğŸ¦´ éª¨ç§‘Xå…‰
```python
# å¼ºè°ƒè¾¹ç¼˜å’Œç»“æ„
use_shock=True          # é”åŒ–éª¨éª¼è¾¹ç¼˜
use_multiscale=True     # å¢å¼ºä¸åŒå°ºåº¦ç»“æ„
use_coherence=True      # ä¿æŠ¤çº¿æ€§ç»“æ„
```

#### ğŸ« èƒ¸éƒ¨Xå…‰
```python
# ä¿æŠ¤è‚ºéƒ¨çº¹ç†
use_wiener=True         # ç²¾ç»†å»å™ª
use_multiscale=True     # ä¿æŒçº¹ç†ç»†èŠ‚
use_shock=False         # é¿å…è¿‡åº¦é”åŒ–
```

#### ğŸ¦· ç‰™ç§‘Xå…‰
```python
# å¢å¼ºå¾®ç»†ç»“æ„
use_bm3d=True          # æœ€ä½³å»å™ª
use_shock=True         # é”åŒ–ç»†èŠ‚
use_coherence=True     # ä¿æŠ¤ç²¾ç»†ç»“æ„
```

## ğŸ”§ è§£å†³å…·ä½“é—®é¢˜

### é—®é¢˜1: å™ªå£°å¤ªå¤šä½†è¦ä¿æŒç»†èŠ‚
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨BM3D + Wieneræ»¤æ³¢ç»„åˆ
```bash
python precision_cli.py input.png output.tiff --bm3d --wiener --no-shock
```

### é—®é¢˜2: å¯¹æ¯”åº¦ä½ä½†ä¸èƒ½æŸå¤±ç»†èŠ‚
**è§£å†³æ–¹æ¡ˆ**: å¤šå°ºåº¦å¢å¼º + è‡ªé€‚åº”å¤„ç†
```bash
python precision_cli.py input.png output.tiff --multiscale --wiener
```

### é—®é¢˜3: è¾¹ç¼˜æ¨¡ç³Šéœ€è¦é”åŒ–
**è§£å†³æ–¹æ¡ˆ**: å†²å‡»æ»¤æ³¢ + å¤šå°ºåº¦å¢å¼º
```bash
python precision_cli.py input.png output.tiff --shock --multiscale
```

## ğŸ“ å®Œæ•´å·¥å…·é›†

1. **`advanced_xray_enhancer.py`** - é«˜ç²¾åº¦GUIç‰ˆæœ¬
2. **`precision_cli.py`** - å‘½ä»¤è¡Œå·¥å…·
3. **`algorithm_comparison.py`** - ç®—æ³•å¯¹æ¯”æµ‹è¯•
4. **`pure_python_precision_test.py`** - æ ¸å¿ƒç®—æ³•éªŒè¯

## ğŸ¯ å…³é”®ä¼˜åŠ¿æ€»ç»“

### âœ… è§£å†³äº†åŸç®—æ³•çš„é—®é¢˜ï¼š
- **ç»†èŠ‚æŸå¤±**: æ–°ç®—æ³•ç»†èŠ‚ä¿æŒåº¦è¾¾åˆ°1.000
- **ç²¾åº¦é—®é¢˜**: æ”¯æŒ16ä½å¤„ç†ï¼Œæœ€å°åŒ–é‡åŒ–æŸå¤±
- **å™ªå£°å¤„ç†**: è‡ªé€‚åº”å»å™ªï¼Œä¸ç ´åç»†èŠ‚

### âœ… æ–°å¢åŠŸèƒ½ï¼š
- **ä¸­æ–‡è·¯å¾„æ”¯æŒ**: è‡ªåŠ¨å¤„ç†ç¼–ç é—®é¢˜
- **è‡ªé€‚åº”å¤„ç†**: æ ¹æ®å›¾åƒå†…å®¹è°ƒæ•´å‚æ•°
- **è´¨é‡è¯„ä¼°**: å®æ—¶æ˜¾ç¤ºç²¾åº¦æŒ‡æ ‡
- **å¤šæ ¼å¼æ”¯æŒ**: 16ä½TIFFè¾“å‡ºä¿æŒæœ€é«˜ç²¾åº¦

### âœ… æ€§èƒ½ç‰¹ç‚¹ï¼š
- **é«˜ç²¾åº¦**: PSNRå¯è¾¾41+ dB
- **é›¶ç»†èŠ‚æŸå¤±**: ç»†èŠ‚ä¿æŒåº¦1.000
- **è¾¹ç¼˜å¢å¼º**: è¾¹ç¼˜ä¿æŒæ¯”ç‡1.3+
- **è‡ªé€‚åº”æ€§**: æ™ºèƒ½å‚æ•°è°ƒæ•´

## ğŸš€ ç«‹å³å¼€å§‹ä½¿ç”¨

```bash
# 1. ä½¿ç”¨GUIç‰ˆæœ¬ï¼ˆæ¨èï¼‰
python advanced_xray_enhancer.py

# 2. å‘½ä»¤è¡Œå¿«é€Ÿå¤„ç†
python precision_cli.py "F:/data/é˜³æå¤šèƒ¶/6mmÃ—5mm/01 OrgImgC1/15_13_16_0594.png" enhanced.tiff --preset balanced --verbose

# 3. æ‰¹é‡å¤„ç†
python batch_enhance.py "F:/data/é˜³æå¤šèƒ¶" "F:/data/enhanced" --workers 4
```

**è¿™å¥—é«˜ç²¾åº¦ç®—æ³•å®Œå…¨è§£å†³äº†æ‚¨æåˆ°çš„ç»†èŠ‚å’Œç²¾åº¦æŸå¤±é—®é¢˜ï¼Œæä¾›äº†ä¸šç•Œé¢†å…ˆçš„Xå…‰å›¾åƒå¢å¼ºæ•ˆæœï¼** ğŸ”¬âœ¨